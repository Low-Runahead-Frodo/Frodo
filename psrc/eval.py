from memory import MemoryReader
import numpy as np
from hash2mat import hex_string_to_matrix

reader = MemoryReader('sim/RAM/data/mem0.hex','hex')
A = reader.read_matrix(16,1344,8,8)
A = np.array(A)
# print(A)
B = reader.read_matrix(1361,1344,8,16)
B = np.array(B)
#print(B)

reader_1 = MemoryReader('sim/RAM/data/mem1.hex','hex')
C = reader_1.read_matrix(100,8,8,16)
C = np.array(C)
# print(C)

reader_2 = MemoryReader('sim/mem1_result.hex','hex')
D = reader_2.read_matrix(100,8,8,16)
D = np.array(D)
print(D)
#print(B[0])
# result = np.matmul(B[0].reshape((8,1)),[A[0]]) + C
#result = B.T @ A + C
result = np.matmul(B.T,A)+C
# print(result)
# print(result==D)

# reader_2 = MemoryReader('sim/mem0_result.hex','hex')
# C_T = reader_2.read_matrix(16,8,8,16)
# C_T = np.array(C_T)
# print(C_T)
# print(C_T==C.T)


string = "fb3ecd955f51cb1cb2679557a2eea4c01a81d670f1ee721ed3953d218604a72f5ed3b41f4834edf054810f96128a63e9d8dc60a490713e2fe44064b0d17ddc9fc866c86bacff830d5df1c977a472cd9d46f89dc42ba848554af3025f861bc423a5b58899d745113cc9d3c0fc28e17fce1e9490a8ae8ae131c75e6a01b1683fb401dbf41fffefa42a2d55307f699a5a395e95be894d04d9f6a51838e24224ca11987006a76db364bb0aab9659251548f9e7b0c73dc4a812633eece196aa21a121cb899d27a1efca767627f2630aececce25c7410cd863b1dedf62813c476ab45c698d91189809d7c97ef23adde2fad16dd1c9a8354daec4776f0881ca4557d874710d120cd9a4ce47aa09591cf5cf0100ed3c4f664a74d4e5ec61d6266bc15dcf7c98615a58e45220014ae1deaedcde9cc11cf1e75d812806085bff5533ead11764ce80a0ee0f0a4dcf186ad440e2d347bdcca56c96c059bcdbf3e8220a36b3cd85b9e429e696ced6e94c28394d1f3fb4eb9de8866d6f3e9b171a16fa21e660835fadc73e084ffbd3d7660ac8e84879bffe22a38cf64cf3c3317a86517d1582155bc48e89efb3f78a346ba6e4c31ff5735f1a7799ce653ef76c4c142d121e8f4e27bd68cedec77c98fa8307692eacd3e4926311bc6d869cb839ee737fc4d1cd3cadaaa4c67cba9f451e84fd0560ddd9ad7bf79cfb50fb9928675a93d82b50dd334b7948ce8b40d8dc6fd82628af72463c6264c5daf70cefa891242b72190ae8f1b0a30e970e320c875e093a63726f6c9dc4721f01657f15edabcab40004ff6ca926e93bb06214e892a6e7876c6adeda0968fa22bf4d7fdd4f3e14f97f8db799ebfaa255cf8c596f8668bc6bb9ce63b640e8bf0598957b4aae1c10bf74c5f59f52049471ee5a8798f4ee534bf19c4cd5d85247415c08be751b72b084f552f3bc311e3e1018f7913e548212aa74f84b32eeb9fb845cc3eccdee22c5ee1e6ad30e7c1166d305228038aee91ede348ff8dd2559d38e64491d6863c63ce49971207b4c712f93a47481bc9b7cbab98900ab173d355aec2a5e086fd6739286e35e8e78887e63edee2c755e06160edf9d031b02e4623122e7d9763a9719c71ed1def332e44f06f80d93d6386ae1386421be5d4b091f1ca2caad710a58dddca68fe578f95d9855f55e93129b16fb9da943785f97f43f180a7a3b6f84430680f7e80e789348d2249e79502b992f1f3dd7e7a949bd2fbce8dfa09df1c50857b7962f63910f366bf5de4783928d61b79e9c8d3de126caf01e8491b70039dd497332439d36f368696c468508af37c50a86aba50c40661c022f051162bfeb0c101a50834635a73435cf9562bacb7802e3cbb0b3062f244b4cfbe9f3c385b839f0afe427714fc16ccc5df65e0e9601a34e363951146d7c15fd537455367ba4681ed142387584c46f5177b4112eefbcb3c25ed7ed41c0247274f9ec42238282766ebdb1718ca2bada83df144a1e48df91efb3adbb0b27941085184dbfd14116467cd03fb06f2a8b81e5df360d767525e7a03552b115364066ca1edd0228e7a5eb97c8861ab4747a108245b0916c7ebbd55c6bb599e557add379cd337f250389e42232b451cb9dd55815beb83ad7e58c63d4bde171bfa5029bb0a5f3cd11fdfc69a788973848ea7ef3975746a7385628016217511c6a6b68c0f27339659c5c0acad0d42ee187eb00db67dbfbfbcf0b8b38f1eefbe029c9846c530104b77c92621ab2793cbefdeeef8b551833778739588d7333382595b3eeab1319bf1bc1fb66d2be681a7f982fa7acb1fc57154774620429317a7786252ec40572091f5341a70b40c64ee3050d793427cd9f434a2b8a908db77add5ec1372aee3e8091db5f0589fe77ffc2e8451ab61e69d24dde05d696a68feb696ccd47e9accfdead8f7cd217258c2f01d36882f7d1d1e3edeb679932511dfd9b4ca89f4f25c6c423f73746121ba46814a4eabf2159402148c4770e4a054ae17984a56c48a4b0dd522a8b84b6125a787d0f3cce3d19964f24c289959f2a9f3138eeb5450277e43246ccb8f332bebdb5c4cead2acd356baff5e05442051a2cfb8e45ae34453b065217174f662a0e857349316a1a79622b552cfbab9885347755eda231a3fb5b74345250e4bccad3a87ad311258f6a8f82a19ee715e08123a5848d43238197fde2aff955a12e51643199c012383a0cfa5142a8af14ab5af4999e950ec0715451e91b0a5946a466765dfcdb380c590e95d052a8a3d079b04edfed298875339fb7a9d49de8228ea21935fde115e07139649d5e5da64774b692299ede404101b4f5cd793533c037b878c63aba707fa2cc9a9b2987dd9c820d23737cfb4a2bfaa88d5a54c91831232956429503ca43c30ae08b19cadae7afd3b799323a15e1a7fa15a87218a5e6bbac651656ef0ba9f8a20d86f9373b09157756f97c88ea5c6ba3b26dd912ba8bcbdbac4135affb41544c2173afbbbcac40f12835818b544f239abced23572f352a1e710292248af63721878f985427933481d53133c6051d82dccac0e9ff41c48ce514d5d5dd0b0fdc183c924bffc1c0c76cfd38f97bd4618a24c4167b8f1d91391743b1f81dda57146f894e2fe3d650d42343549bdb7a2b31035df05da2c796f99f5558a5b49f3108b501117991d4f1263c9811b68dbacd21bff15032f12259e22930e9b034e04333883bc231f6dad3f9481c2ac92a2b1ba984ba5ef996d41184dea1e9b87b8b0e07440fa64f7cf903ae20a2776d0e73dbed2214f13b24d5ff40db9644e7681c10b89595e0e4c57afc8236fa92650d130017d748b9fb9662fb07327922b81c04bbad84ad9ca8bcf68e82fcaf65181dc429d405cfb3ba604c8281660ed86018243f6428ff7b4692ec529ef5f0850d82f0eb76854cd94fafef89a7704c58a9c892a0af8e9d8ab2f45f22c1f7b341c67d9c642ff0ebe9fbc38bdd1555057e5384477dcb256873dee854a3466aaa3aea459ba69392b974c64da4c5933682ba49eaca5d56d813ca5acad62feece485e27ccdcaafb56a97421f8a23858a76d71d5b3669663284e1e5461271c4fc8a4ed11775e4c8262c8522d3e4578b08cebde8b7aa91b77ca02f7930a9d975d2488797f394f1ba4dd11b3d501efc12e126765b4691194efb92c73aee83588c20e904b70137e00d8d4e5daa61ef68eb70e0ac9e8848aa91587950fe53182737c8504ddb277bf6ac10e4c3dca4ed41f25845f46035ee12ec9ee882c2a446c06f2bb8b95c61e3b6da703f2846667a1f35dc8eb9ec5b03036a065d944a1a2f6530719cf14a3ba0c9e7d79c5b59c32e0f1178cd5a7cd9d60ad3174fdecaa860124569acc657f9dcb3720d13f69763fe06d544aa024b2fa8b7cbb8afd1143873dd0d3c1f17b1a27d5940b0ccf2cf3a84fc6817ddc4640cb9370f3599bc291c18223cda0e66ce7e6908531abbd44857501cee830e57b5e1e0a14015a68c2f9fb1010d4d2c7fc25adcbeedbb0cd13f8aff854e8bee8d2b9b1789c7c59ff5a960bc3de47280e95c6f6bf201cde8fc98f82548bd479300f16b204ab9b20a81889a15394f241ced9be8ed6d06e06a0525b199688951c929b7d94f9ecda3fd24d37a4c1184befcc639ed90909e14415edc884bc532285845e7c50304ccabe6e23514d1f63a5fa54fb5110adfbca3c7d47a5e1e0ade9b4191a58bf32c88aa4aaa252d03599d976470806e0a6345e0c52d4daf8913c44e9b233c8e5ef19242cc7bcd458f9672ba37bf17a263da6241fbe569348f7cc347291dd7ee7265ff114"
string2 = "deead9fd6903ff2ff07054dd0f68feeb1766d5d229c8cbd49b6adcdb9bc9618b5a7082780a0957be46c6a401d0e53def59efb2cfa3d9e9f1aa958b6f30c873f3ce10a445412a9b50543c3b9f35a7c63d423f779ffb679a09486ff7c25d86ba6170f6d55e018c18f2707111822be1130e66cf6bd9f3be0c21e8ff0c7e6813b5fbec1d3ab417e1dbea90664b3df480fb5bd590cfa7a0e69a627bdbad32b5af252ef7a95b116adb9e18a2c7a630edc83ecc8d9c765c4491a48967c4abade6f31cc9ab4879cab7c1b35481b4250402029c8979289590368c427e96d60cf5076012e54f93c5aad619f7b76734d21031fe03de2e10ec3f3de466d36d89ec8ae9cdf354f0e8cff168dda7c1d15bc765dc651c208d5926a8e8c4cd4811d5a4942c1302e3b8be38d415f524e9ba15cc7d8b1936024491f2e10229a49000cdaa9fd0178d29dcf7b78a67e0732718e903f7092b69f5529de263ccf952ea67f0f6e4a71b54cc8d490497f2d9a90f1fe659a9c6c00e6d58a44b3828d240acbb6273f648a28a76563348736b86ece50c104ff323d38272f3242aa29973b3d80391fe4bfdcc932224c537849bf885f0a37b43652d5eb6b8cad06c662721caf11e85c138840a0e3a1e55a9813d8bf20b126921c3ac17e9215c1b916336f7c0443f5e4f15929c6436bf795fbe648706d45464247837f69102b037c9eba54c539568ac4a46226c09957aae9effce0b4ca8bbacc126eb28237fee755175d07a64171e7ff164924a0e96440b8709ef592f2fe84af478988df39b17daa7ac964528ebbc960c3e8501af2cd71e594fe29d691cfeaaa40c501127d102e353fa9e682f9405f421c137b36507d943bb6a057bafb74b2daecbdd8cc9a579d50153ee9e5884c212144f290977246e7392e2bde1089ca48338f64b6148517f5ee5500bf374df58fa21b9d9f53ace7852a0b2de64d4576cca57053719c966d5525d0ddc83a5af2a246aa4cbb2fd13dfff673d82e6b75b73f97e7d5ef512b95636d351e15fd19f44646e3de1069f578211bf52b63f4ee2d509d9fd3f6dc6fbec9b311a491c6219a6fff78b2b23bdb90b11c15f0a237927378adcca786e388a2bbdb521fdd20364fec4fa4e4aefe7fab5fb7a6ff5d33c097e33605961347f0913a19c53c798c54291fae0f71c797c3297be013fe84fd0ade42072c727be4ec0aafcfc5998f4ca204169ce6f1e4836c75405bcf80deaea1acfd38f208a0031021875413efc84f1bede0aad7de134094a1895f7d9502135d38c79342b5fb91603829de287bbc08e698e4b054858e7b1c27d3b119ed5ac35a63471bb7862be448fb4bb09d38dea193cf3c31ca259152008bd9fb712afae41dcf163b8aeabd67831e1d712035915fc0b3550a09924198ec12d50581d2487d5dc7492b500f9c7d9196dd25c6fe06c5762452851cfa5e1be75d8e09810eab0dce2be7794ffd93d9d013432e3854354d4e05a5502f31abd9bad718f7cce39bed5084fc3bd13c1c7432cdc58bad07d98a07ab4b7b68cd950d0c7714a33abcff911cf12dd170da97ae567ce6efdfcc4237d4c4b2a8956603b1673cec47c5dc9a0bcea6ccde96cb72f826dbd3ddcd6d8a47d0b2a7f78c5d68d65285b3d2fa56ac86f918288aba69235513aaebc3d6372b5551f947f331c2e0593a4284f050b97fe4a126a488807cc602d5fe1794385cf7bdcf36274cd1701f8a105b78ce550e73131083a227d9011e597d176d12a67f5108a6d3f2203da77825e615d71575465e4c2e9dccf1a858e821b0f19e1fd81c59e72d5eaaa151d84394ad55e9a6c3432fd01e0dfcd88f14b1dc984dfa39e5df13dd4f9f4282636ad0d09cc45eec54f3bfc73297ba4ab24fcfa8f945bf452c5230e79c1fe66e0c5402bc58bb4f3e0331b39f590eae97e92390763611bafc2f808d10773bea09f95e9506b1b5c691dbd3594927f67ede64bd50004d10c2082394b3e0663d47194bc99073376812f15d9199b9c0cdfdcd9d4e79e5b4d927e3cbc2013ce0509f6a45eeab9290090e8222e1b2a83ee8c263c6ff30f6b24c5ea2d99455e731bd0ebb6543b37d106f2895932d4cf25805bc0f9ee8e594258d04a1dc4b49e1cb61dcd5e33aa3f9dffb25afedfbf7da155ba7104196adbc93de24307a33dacd766af19f9a0f84824b2637eafe917c07f8f8d8e0ecef3d3abaa746c1bc850720791f1c40571391e9035fc797762a2f34cff6ac659c35614a2d2f27b680fa71f3ede0bc5a9898d1c559c45b40f288c33cfdbf1302d0865f5cfe059a3470267738abc063d32e1d77c05cb5277f3c04f9fdbddbf369e6efb30ec79c1b8a1e08b698c1c7f932915c18e3ad85a20b01f4180242fb8d803e9de29e53e22a1e64e58e11631387a58d4ab5b1927650e4c5be5b9a8d0c79c963f89762cabeaa324017be176e304b0d8b335d3c96911e1cedf4ccd231ac4fb8c57c8d935eafc4e17d7e765731193b54823d4f85eeadba994c3edac1736d092e53da8dba4c814b268ea91e3695b85d616d6f224e1b0b880c823a60cf5172587c448c759c5de505689b22df5c8da56512743361ba2bf8b4c37d766f7689465b5fd7de342f807964d86517469d14855a6ccc0e99061352cbda4f866a704f740787737ceb20bd5a8d9c7900cc2ef80b894d040ac4483eb6af3f201907b68f75ea8bc0ea0a296acf6382d980d7d8cf10074003af943fb2b6956c7ffaa6835b6af3cb48a01f824b88c2e0168e4d6288cccc2ee9610c2f1658d396c7dd021cc009f34c63efdfb80a45ab5f539e8d2102c7017684b06a46e480a37625c6a61120a6910e068b91751d54d4d3eff83bae639f44f3aad9580efb3d8215eaf185e854dbeea9de722587e1c152836335f6a1884f003d39f24cd00b9ef729bbb8120f7a60f352760710e2472d305d991a8545170227dcc282da966dc13d2a1cec9d48cd9cb0e6491272894ca9630c83087cc2bf411c5fcdf5f40f5953bdc66dac3bf838e340b18a716ab186d2096a830163daebfc2d82591544af2549792fa8da2e2c5e4909034538042acba8b86da25d23b0fcde68b66c31e25cf8c1317f7b0d0f08e9fefc7727fc0ecbf633b1af5a7e85cea60cc47151758cf8568fdcdfb152ea8ff044c2e09f2585147d95f25781f58c74e703ce8842b7ab0fed4ddd63460c50826a88c749390b1814afc85ade507cfe164a323687f3dc1194cf494e820a119c127f0f4314d0d2286e5ce2d8e5feff51e5c5dedb19a70863aaa4fd6f496809ad6b1db76bb702303f48df5337aede7d099eefc97c23c28250321128d664b374a238ca67eeda7b13ff310389e823f46f47dc3207b693c2f4e2ba53cbef04a30270dabbf1ee6882e6635752ba33bd5986d1e6d76b8d50af2c100cb128edebeb91c3f45d25bb68ac9756843cf35b8dc432c0a88b24607ebdbf6d9ea1a3e5edf05958ceaf03e1eff08f4af74d3f7b0ad0d77a780b5dbc726cb6a3330d2e7a70bed9bfffac57889741711a8e50517e3aa59e33ad13adb75b87bde57e516584ed70640ba008d5ebddb07bcd2ae44ffbec8df7cbd47c9e9d4c23334d7077d05619209e0c57b3a3b22ad89044f0c24c23db63b056da7c18bd57d7cd7e0b0d66400626fddbda6b88f5986a4ba9b8ea21079bdd157999615ef63f6ee615e00de63f34868f3df097414ae5e234c224112205353570b8cc9aac829c21e914992453ff7aa47f84173e530775a6e1a870b7b37eb8f3cf57cdb8d6ddbe653844ff9a1413a45ccd4358bff9941538353b339bc3d652f5605a5fed38a9c72b9376d8a65"
mat = hex_string_to_matrix(string,rows=1)
#print(mat)
mat2 = hex_string_to_matrix(string2,rows=1)
temp = [0,0,0,0,0,0,0,0]
for i in range(1344):
    for j in range(8):
        # print(mat[0][i],A[i][j])
        temp[j] = temp[j] + mat[0][i]*A[i][j]
        temp[j] = temp[j]%65536

print(temp)
temp = [0,0,0,0,0,0,0,0]
for i in range(1344):
    for j in range(8):
        # print(mat[0][i],A[i][j])
        temp[j] = temp[j] + mat2[0][i]*A[i][j]
        temp[j] = temp[j]%65536

print(temp)